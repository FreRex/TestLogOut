<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <!-- <ion-menu-button></ion-menu-button> -->
      <ion-menu-toggle auto-hide="false">
        <ion-button (click)="toggleMenu()">
          <ion-icon slot="icon-only" name="menu"></ion-icon>
        </ion-button>
      </ion-menu-toggle>
    </ion-buttons>

    <ion-title>Backoffice</ion-title>

  </ion-toolbar>
</ion-header>
<ion-content>

  <ion-tabs>
    <ion-tab-bar slot="bottom" color="primary">

      <ion-tab-button (click)="openCreateUser()">
        <ion-icon name="person-add-outline"></ion-icon>
        <ion-label>Crea Utente</ion-label>
      </ion-tab-button>

      <ion-tab-button (click)="openGisfoUpload()">
        <ion-icon name="cloud-download-outline"></ion-icon>
        <ion-label>GysFo Sync</ion-label>
      </ion-tab-button>

      <ion-tab-button (click)="openUploadShp()">
        <ion-icon name="duplicate-outline"></ion-icon>
        <ion-label>Upload SHP</ion-label>
      </ion-tab-button>
    </ion-tab-bar>
  </ion-tabs>

  <ion-grid>
    <ion-row>
      <ion-col size-md="8" offset-md="2">
        <ion-card class="card-out">

          <div class="ion-margin-vertical ion-text-right ">
            <ion-button size="small" shape="round" fill="outline" color="primary" (click)="showProjectsClick()">
              <ion-icon slot="start" name="file-tray-full-outline"></ion-icon>Progetti
            </ion-button>
            <ion-button size="small" shape="round" fill="outline" color="primary" (click)="showUsers()">
              <ion-icon slot="start" name="people-outline"></ion-icon>Utenti
            </ion-button>
          </div>
          <ion-card-content>

            <!-- TODO / INSERIRE LOGICA RICERCA -->
            <ion-searchbar #searchInput placeholder="Cerca"></ion-searchbar>
            <!-- INSERIRE LOGICA RICERCA / TODO -->
            <ion-card class="card-inside" *ngIf="showProjects">
              <ion-item-sliding *ngFor="let proj of (projects$ | async)">
                <ion-item>
                  <div class="ion-margin-vertical">
                    <ion-icon name="map-outline" color="secondary"></ion-icon>
                  </div>
                  <ion-grid>
                    <ion-row>
                      <ion-col class="ion-text-center">
                        <ion-label color="primary">{{ proj.nome }}</ion-label>
                        <p color="primary"><b>PK:</b> {{ proj.pk_proj }}</p>
                      </ion-col>
                      <ion-col class="ion-text-center">
                        <p color="primary"><b>Lat:</b> {{ proj.lat_centro_map }}</p>
                        <p color="primary"><b>Long:</b> {{ proj.long_centro_map }}</p>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
                <ion-item-options>
                  <ion-item-option color="danger" (click)="onDelete()">
                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                  </ion-item-option>
                  <ion-item-option color="warning">
                    <ion-icon name="pencil-outline" slot="icon-only"></ion-icon>
                  </ion-item-option>
                </ion-item-options>
              </ion-item-sliding>
            </ion-card>
            <ion-card class="card-inside" *ngIf="!showProjects">
              <ion-item-sliding *ngFor="let user of (users$ | async)">
                <ion-item>
                  <div class="ion-margin-vertical">
                    <ion-icon name="person-outline" color="secondary"></ion-icon>
                  </div>
                  <ion-grid>
                    <ion-row>
                      <ion-col class="ion-text-center">
                        <ion-label color="primary"><b>Nome:</b> {{ user.collaudatoreufficio }}</ion-label>
                        <ion-label color="primary"><b>Autorizzazione</b>: {{ user.autorizzazioni }}</ion-label>
                      </ion-col>
                      <ion-col class="ion-text-center">
                        <p color="primary"><b>User:</b> {{ user.username }}</p>
                        <p color="primary"><b>Password</b>: {{ user.password }}</p>
                      </ion-col>
                    </ion-row>
                  </ion-grid>
                </ion-item>
                <ion-item-options>
                  <ion-item-option color="danger" (click)="onDelete()">
                    <ion-icon name="trash" slot="icon-only"></ion-icon>
                  </ion-item-option>
                  <ion-item-option color="warning">
                    <ion-icon name="pencil-outline" slot="icon-only"></ion-icon>
                  </ion-item-option>
                </ion-item-options>
              </ion-item-sliding>
            </ion-card>

          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

  </ion-grid>
</ion-content>


<!-- <div class="ion-text-right button-menu">
  <ion-button size="small" shape="round" color="light" fill="outline" (click)="openCreateUser()">
    <ion-icon size="small" slot="icon-only" name="person-add-outline"></ion-icon>
  </ion-button>
  <ion-button size="small" shape="round" color="light" fill="outline" (click)="openGisfoUpload()">
    <ion-icon size="small" slot="icon-only" name="cloud-download-outline"></ion-icon>
  </ion-button>
  <ion-button size="small" shape="round" color="light" fill="outline" (click)="openUploadShp()">
    <ion-icon size="small" slot="icon-only" name="duplicate-outline"></ion-icon>
  </ion-button>
</div> -->
